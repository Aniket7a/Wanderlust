
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beautiful Home | Wanderlust</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/starability/starability-minified/starability-all.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <style>
        

        :root {
            --airbnb-red: #ff385c;
            --airbnb-dark-red: #e31c5f;
            --light-gray: #f7f7f7;
            --medium-gray: #717171;
            --dark-gray: #222222;
            --border-radius: 12px;
            --shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
        }
        
        body {
            background-color: #fff;
            color: var(--dark-gray);
            padding-top: 80px;
        }
        
        /* Navbar */
        .navbar {
            background-color: #fff;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
            padding: 14px 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--airbnb-red);
            letter-spacing: -1px;
        }
        
        .navbar-nav .nav-link {
            color: var(--dark-gray);
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.2s ease;
        }
        
        .navbar-nav .nav-link:hover {
            background-color: #f7f7f7;
        }
        
        /* Listing Header */
        .listing-header {
            padding: 24px 0 16px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .listing-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .listing-subtitle {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
            color: var(--medium-gray);
        }
        
        .guest-favorite {
            background-color: #f7f7f7;
            border-radius: 4px;
            padding: 8px 12px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
        }
        
        .guest-favorite i {
            color: var(--airbnb-red);
        }
        
        /* Image Gallery */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 8px;
            height: 500px;
            margin-bottom: 32px;
            max-width: 1200px;
            margin: 0 auto 32px;
        }
        
        .gallery-main {
            grid-column: 1 / span 2;
            grid-row: 1 / span 2;
            border-radius: var(--border-radius);
            overflow: hidden;
        }
        
        .gallery-main img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .gallery-item {
            border-radius: var(--border-radius);
            overflow: hidden;
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 48px;
            padding-bottom: 64px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Listing Details */
        .listing-info {
            border-bottom: 1px solid #ebebeb;
            padding-bottom: 32px;
            margin-bottom: 32px;
        }
        
        .listing-highlights {
            display: flex;
            align-items: center;
            gap: 24px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }
        
        .highlight-item {
            display: flex;
            flex-direction: column;
            min-width: 200px;
        }
        
        .highlight-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        
        .host-info {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .host-avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: #f7f7f7;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--medium-gray);
        }
        
        .description {
            line-height: 1.6;
            margin-bottom: 32px;
            color: #333;
        }
        
        /* Amenities */
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .amenity-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        /* Booking Card */
        .booking-card {
            border: 1px solid #ebebeb;
            border-radius: var(--border-radius);
            padding: 24px;
            box-shadow: var(--shadow);
            position: sticky;
            top: 100px;
        }
        
        .price-per-night {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .date-picker {
            border: 1px solid #ebebeb;
            border-radius: 8px;
            overflow: hidden;
            margin: 16px 0;
        }
        
        .date-row {
            display: flex;
            border-bottom: 1px solid #ebebeb;
        }
        
        .date-col {
            flex: 1;
            padding: 12px;
        }
        
        .date-col:first-child {
            border-right: 1px solid #ebebeb;
        }
        
        .date-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 4px;
            color: var(--medium-gray);
        }
        
        .guests-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ebebeb;
            border-radius: 8px;
            margin: 16px 0;
        }
        
        .book-btn {
            background: linear-gradient(to right, #e61e4d 0%, #e31c5f 50%, #d70466 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 14px;
            width: 100%;
            font-weight: 600;
            font-size: 1rem;
            margin: 8px 0 16px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .book-btn:hover {
            background: linear-gradient(to right, #d50c45 0%, #d10b56 50%, #c2005d 100%);
        }
        
        .price-breakdown {
            border-top: 1px solid #ebebeb;
            padding-top: 16px;
            margin-bottom: 16px;
        }
        
        .price-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            color: var(--dark-gray);
        }
        
        .price-total {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            border-top: 1px solid #ebebeb;
            padding-top: 16px;
            margin-top: 8px;
            color: var(--dark-gray);
        }
        
        /* Ratings Section */
        .ratings-section {
            border-bottom: 1px solid #ebebeb;
            padding-bottom: 32px;
            margin-bottom: 32px;
        }
        
        .overall-rating {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .rating-value {
            font-size: 2rem;
            font-weight: 600;
        }
        
        .rating-stars {
            color: var(--airbnb-red);
            font-size: 1.2rem;
            margin-bottom: 4px;
        }
        
        .rating-category {
            display: flex;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .rating-category-name {
            font-weight: 500;
        }
        
        /* Reviews Section */
        .review-card {
            border-bottom: 1px solid #ebebeb;
            padding: 24px 0;
        }
        
        .review-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .review-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: #f7f7f7;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--medium-gray);
        }
        
        .reviewer-info {
            flex: 1;
        }
        
        .reviewer-name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .review-date {
            color: var(--medium-gray);
            font-size: 0.9rem;
        }
        
        .review-content {
            line-height: 1.6;
            margin-bottom: 16px;
            color: #333;
        }
        
        .show-more {
            color: var(--dark-gray);
            font-weight: 600;
            text-decoration: underline;
            cursor: pointer;
        }
        
        .review-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 12px;
            color: var(--medium-gray);
            font-size: 0.9rem;
        }
        
        .review-meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        /* Review Form */
        .review-form {
            border: 1px solid #ebebeb;
            border-radius: var(--border-radius);
            padding: 24px;
            margin-top: 32px;
            background-color: #fff;
        }
        
        .form-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .rating-slider {
            width: 100%;
            margin: 16px 0;
        }
        
        .rating-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--medium-gray);
            margin-top: -12px;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ebebeb;
            border-radius: 8px;
            margin: 8px 0 16px;
            font-family: inherit;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--airbnb-red);
            box-shadow: 0 0 0 2px rgba(227, 28, 95, 0.2);
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .submit-btn {
            background: linear-gradient(to right, #e61e4d 0%, #e31c5f 50%, #d70466 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .submit-btn:hover {
            background: linear-gradient(to right, #d50c45 0%, #d10b56 50%, #c2005d 100%);
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 16px;
            margin-top: 24px;
            flex-wrap: wrap;
        }
        
        .btn-edit {
            background: linear-gradient(to right, #e61e4d 0%, #e31c5f 50%, #d70466 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.2s;
            text-align: center;
            cursor: pointer;
        }
        
        .btn-edit:hover {
            background: linear-gradient(to right, #d50c45 0%, #d10b56 50%, #c2005d 100%);
            color: white;
            text-decoration: none;
        }
        
        .btn-delete {
            background-color: white;
            color: var(--airbnb-red);
            border: 2px solid var(--airbnb-red);
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-delete:hover {
            background-color: #fff5f5;
        }
        
        /* Footer */
        .footer {
            background-color: #f7f7f7;
            padding: 40px 0;
            border-top: 1px solid #ebebeb;
        }
        
        .footer-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }
        
        .footer-column h4 {
            font-size: 1rem;
            margin-bottom: 16px;
            font-weight: 600;
        }
        
        .footer-links {
            list-style: none;
            padding: 0;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: var(--dark-gray);
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .footer-bottom {
            max-width: 1200px;
            margin: 40px auto 0;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #ebebeb;
            padding-top: 24px;
            flex-wrap: wrap;
        }
        
        .footer-lang-currency {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 0.9rem;
        }
        
        .copyright {
            color: var(--medium-gray);
            font-size: 0.9rem;
        }
        
        .social-links {
            display: flex;
            gap: 16px;
            margin-top: 16px;
        }
        
        .social-links a {
            color: var(--dark-gray);
            font-size: 1.2rem;
        }
        
        /* Responsive adjustments */
        @media (max-width: 992px) {
            .image-gallery {
                height: 400px;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .booking-card {
                position: relative;
                top: 0;
            }
            
            .footer-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .image-gallery {
                height: 300px;
                grid-template-rows: 200px 100px;
            }
            
            .amenities-grid {
                grid-template-columns: 1fr;
            }
            
            .listing-highlights {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }
            
            .footer-bottom {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }
        }
        
        @media (max-width: 576px) {
            .image-gallery {
                height: auto;
                grid-template-columns: 1fr;
                grid-template-rows: auto;
            }
            
            .gallery-main {
                grid-column: 1;
                grid-row: 1;
                height: 300px;
            }
            
            .gallery-item {
                height: 100px;
            }
            
            .footer-container {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
     <style> 
     .starability-basic {
    margin-bottom: 1rem;
}

/* Reviews Section */
#reviews {
    margin-top: 2rem;
    padding: 1.5rem 0;
}

.review-card {
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    border: 1px solid #e0e0e0;
    position: relative;
}

.review-card h6 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #222;
    display: flex;
    align-items: center;
}

.review-card h6::before {
    content: "";
    display: inline-block;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: #ff385c;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
    font-weight: bold;
}

.meta {
    font-size: 0.9rem;
    color: #717171;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 5px;
}

.stars {
    color: #ff385c;
    font-size: 1.1rem;
    margin-bottom: 0.75rem;
    letter-spacing: 1px;
}

.review-card p {
    color: #333;
    line-height: 1.6;
    margin-bottom: 1rem;
    font-size: 0.95rem;
}

.btn-outline-danger {
    color: #ff385c;
    border-color: #ff385c;
    font-weight: 500;
    padding: 0.25rem 0.75rem;
    font-size: 0.85rem;
    border-radius: 8px;
    transition: all 0.2s;
}

.btn-outline-danger:hover {
    background-color: #ff385c;
    color: white;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .review-card {
        padding: 1.25rem;
    }
    
    .review-card h6 {
        font-size: 1rem;
    }
}
</style> 





</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fa-solid fa-compass-drafting"></i>Wanderlust</a></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="d-flex w-100 align-items-center">
                    <div class="search-bar d-flex align-items-center me-3">
                        <!-- <input type="text" placeholder="Search destinations">
                        <button class="search-btn">
                            <i class="fas fa-search"></i>
                        </button> -->
                    </div>
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="/listings">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#reviews">Reviews</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Online Experiences</a>
                        </li>
                    </ul>
                    <!-- <div class="user-menu">
                        <span>Become a Host</span>
                        <div class="dropdown">
                            <button class="btn" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-globe me-1"></i>
                                <i class="fas fa-bars"></i>
                                <i class="fas fa-user-circle ms-2" style="font-size: 1.5rem;"></i>
                            </button>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
    </nav>
<!-- Flash-->
<div class="container position-fixed top-0 start-50 translate-middle-x mt-3" style="z-index: 1050; max-width: 90%;">
  <% if (success && success.length > 0) { %>
    <div class="alert alert-success alert-dismissible fade show shadow" role="alert" style="border-radius: 12px;">
      <i class="fa-solid fa-circle-check me-2"></i> <%= success %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% } %>

  <% if (error && error.length > 0) { %>
    <div class="alert alert-danger alert-dismissible fade show shadow" role="alert" style="border-radius: 12px;">
      <i class="fa-solid fa-triangle-exclamation me-2"></i> <%= error %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% } %>
</div>

    <!-- Listing Header -->
    <div class="listing-header">
        <h1 class="listing-title"><%= listing.title %></h1>
        <div class="listing-subtitle">
            <span><i class="fas fa-star"></i>3.8+ reviews</span>
            <span><i class="fas fa-medal"></i> Superhost</span>
            <span><%= listing.location %> <%= listing.country %></span>
        </div>
        <div class="guest-favorite">
            <i class="fas fa-crown"></i>
            <div>
                <div style="font-weight: 600;">Guest favourite</div>
                <div>This home is in the top 10% of eligible listings based on ratings, reviews and reliability</div>
            </div>
        </div>
    </div>

    <!-- Image Gallery -->
    <div class="image-gallery">
        <div class="gallery-main">
            <img src="<%= listing.image.url %>" alt="Living room">
        </div>
        <div class="gallery-item">
            <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80" alt="Bedroom">
        </div>
        <div class="gallery-item">
            <img src="https://images.unsplash.com/photo-1611892440504-42a792e24d32?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80" alt="Kitchen">
        </div>
        <div class="gallery-item">
            <img src="https://images.unsplash.com/photo-1584622650111-993a426fbf0a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80" alt="Bathroom">
        </div>
        <div class="gallery-item">
            <img src="https://images.unsplash.com/photo-1593696140826-c58b021acf8b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80" alt="Garden">
        </div>
    </div>

    <div class="main-content">
        <div class="left-column">
            <!-- Listing Details -->
            <div class="listing-info">
                <div class="listing-highlights">
                    <div class="highlight-item">
                        <div class="highlight-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <div>
                            <div style="font-weight: 600;">Entire home</div>
                            <div>You'll have the place to yourself</div>
                        </div>
                    </div>
                    <div class="highlight-item">
                        <div class="highlight-icon">
                            <i class="fas fa-broom"></i>
                        </div>
                        <div>
                            <div style="font-weight: 600;">Sparkling clean</div>
                            <div>10 recent guests said it was clean</div>
                        </div>
                    </div>
                    <div class="highlight-item">
                        <div class="highlight-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <div style="font-weight: 600;">Great location</div>
                            <div>90% of recent guests gave 5 stars</div>
                        </div>
                    </div>
                </div>

                <div class="host-info">
                    <div class="host-avatar">UA</div>
                    <div>
                        <h3>Hosted by <%= listing.owner.username %></h3>
                        <div>Superhost · 3 years hosting</div>
                    </div>
                </div>
<h2> About this space
</h2>
                <div class="description">
                    <p><%= listing.description %></p>
                </div>
                
                <!-- Action Buttons -->
                 <% if(currUser && currUser._id.equals(listing.owner._id)) {%>
                
                <div class="action-buttons">
                    <a href=" /listings/<%= listing._id %>/edit" class="btn-edit">
                        <i class="fas fa-edit me-2"></i>Edit this listing
                    </a>
                    <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE">
                        <button type="submit" class="btn-delete">
                            <i class="fas fa-trash me-2"></i>Delete Listing
                        </button>
                    </form>
                </div>
                 <% } %>
            </div>
    
            <!-- Amenities -->
            <div class="amenities-section">
                <h2>What this place offers</h2>
                <div class="amenities-grid">
                    <div class="amenity-item">
                        <i class="fas fa-wifi"></i>
                        <div>Wifi</div>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-parking"></i>
                        <div>Free parking on premises</div>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-thermometer-three-quarters"></i>
                        <div>Heating</div>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-tv"></i>
                        <div>TV</div>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-utensils"></i>
                        <div>Kitchen</div>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-washer"></i>
                        <div>Washer</div>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-smoking-ban"></i>
                        <div>No smoking</div>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-paw"></i>
                        <div>Pets allowed</div>
                    </div>
                </div>
            </div>

          
            <!-- Ratings Section -->
            <div class="ratings-section">
                <div class="overall-rating">
                    <div class="rating-value"><%= avgRating %></div>
                    <div>
                        <div class="rating-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <div><%= listing.reviews.length %> reviews</div>
                    </div>
                </div>
                
                <div class="rating-categories">
                    <div class="rating-category">
                        <div class="rating-category-name">Cleanliness</div>
                        <div class="rating-stars">4.0+</div>
                    </div>
                    <div class="rating-category">
                        <div class="rating-category-name">Accuracy</div>
                        <div class="rating-stars">4.0+</div>
                    </div>
                    <div class="rating-category">
                        <div class="rating-category-name">Check-in</div>
                        <div class="rating-stars">4.0+</div>
                    </div>
                    <div class="rating-category">
                        <div class="rating-category-name">Communication</div>
                        <div class="rating-stars">4.0+</div>
                    </div>
                    <div class="rating-category">
                        <div class="rating-category-name">Location</div>
                        <div class="rating-stars">4.0+</div>
                    </div>
                    <div class="rating-category">
                        <div class="rating-category-name">Value</div>
                        <div class="rating-stars">4.0+</div>
                    </div>
                </div>
            </div>



<!-- map -->

            <h3>Where you’ll be</h3>
  <div id="map" style="height: 400px;"></div>



            <!-- Reviews -->
             <section id="reviews" class="mt-5">
             <% for(review of listing.reviews) { %>
      <div class="review-card">
        <h6><%= review.author.username || "Guest" %></h6>
        <div class="meta">★ <%= review.rating %> stars</div>
        <div class="stars">
          <% for(let i = 0; i < review.rating; i++) { %>★<% } %>
        </div>
        <p><%= review.comment %></p>
 <% if(currUser){ %>
        <form action="/listings/<%= listing._id %>/reviews/<%= review._id %>?_method=DELETE" method="post">
          <button class="btn btn-sm btn-outline-danger mt-2">Delete</button>
        </form>
           <% } %>
      </div>
    <% } %>
</section>
            <!-- Review Form -->
             <% if(currUser){ %>
            <form method="POST" action="/listings/<%= listing._id %>/reviews" class="review-form needs-validation" novalidate>
    <h3 class="form-title">Leave a Review</h3>

    <label for="rating">Rating</label>
    <fieldset class="starability-basic">
        <input type="radio" id="rate5" name="review[rating]" value="5" checked />
        <label for="rate5" title="Amazing">5 stars</label>

        <input type="radio" id="rate4" name="review[rating]" value="4" />
        <label for="rate4" title="Very good">4 stars</label>

        <input type="radio" id="rate3" name="review[rating]" value="3" />
        <label for="rate3" title="Average">3 stars</label>

        <input type="radio" id="rate2" name="review[rating]" value="2" />
        <label for="rate2" title="Not good">2 stars</label>

        <input type="radio" id="rate1" name="review[rating]" value="1" />
        <label for="rate1" title="Terrible">1 star</label>
    </fieldset>

    <label for="comment">Comments</label>
    <textarea id="comment" name="review[comment]" class="form-control" placeholder="Share your experience..." required></textarea>
    <div class="invalid-feedback">Please submit some comments for review</div>

    <button type="submit" class="submit-btn">Submit Review</button>
</form>

            <% } %>
            
        </div>





        
        <!-- Booking Card -->
        <div class="right-column">
            <div class="booking-card">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="price-per-night"> ₹ <%= listing.price ? listing.price.toLocaleString("en-IN") : "N/A" %>/ night</div>
                        <div class="d-flex align-items-center">
                            <div class="rating-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <span class="ms-2"><%= avgRating %>   reviews</span>
                        </div>
                    </div>
                </div>
                
                <div class="date-picker">
                    <div class="date-row">
                        <!-- <div class="date-col">
                            <div class="date-label">CHECK-IN</div>
                            <div>6/24/2025</div>
                        </div>
                        <div class="date-col">
                            <div class="date-label">CHECKOUT</div>
                            <div>6/27/2025</div>
                        </div> -->
                    </div>
                    <div class="date-row" style="border-bottom: none;">
                        <div class="date-col" style="border-right: none;">
                            <div class="date-label">GUESTS</div>
                            <div>2 guests</div>
                        </div>
                    </div>
                </div> 
                
                 
                <div class="text-center" style="margin-bottom: 16px; color: var(--medium-gray);">You won't be charged yet</div>
                
                 <div class="price-breakdown">
                    
                   <%
    const cleaningFee = 1000;
    const serviceFee = 1500;
    const basePrice = listing.price || 0;
    const totalPrice = basePrice + cleaningFee + serviceFee;
%>

<div class="price-breakdown">
    <div class="price-item">
        <div>₹ <%= basePrice.toLocaleString("en-IN") %> x 1 night</div>
        <div>₹ <%= basePrice.toLocaleString("en-IN") %></div>
    </div>
    <div class="price-item">
        <div>Cleaning fee</div>
        <div>₹ <%= cleaningFee.toLocaleString("en-IN") %></div>
    </div>
    <div class="price-item">
        <div>Service fee</div>
        <div>₹ <%= serviceFee.toLocaleString("en-IN") %></div>
    </div>
</div> 

<div class="price-total">
    <div>Total</div>
    <div>₹ <%= totalPrice.toLocaleString("en-IN") %></div>
</div>

            </div>
        </div>
    </div>

    <!-- Footer -->
    
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-column">
                <h4>Support</h4>
                <ul class="footer-links">
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">WanderCover</a></li>
                    <li><a href="#">Safety information</a></li>
                    <li><a href="#">Supporting people with disabilities</a></li>
                    <li><a href="#">Cancellation options</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Community</h4>
                <ul class="footer-links">
                    <li><a href="#">Wanderlust.org: disaster relief housing</a></li>
                    <li><a href="#">Combating discrimination</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Hosting</h4>
                <ul class="footer-links">
                    <li><a href="#">Wanderlust your home</a></li>
                    <li><a href="#">WanderCover for Hosts</a></li>
                    <li><a href="#">Hosting resources</a></li>
                    <li><a href="#">Community forum</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Wanderlust</h4>
                <ul class="footer-links">
                    <li><a href="#">Newsroom</a></li>
                    <li><a href="#">New features</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">Investors</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div>
                <div class="copyright">© 2025 Wanderlust, Inc. · Privacy · Terms · Sitemap</div>
                <div class="footer-lang-currency">
                    <span><i class="fas fa-globe"></i> English (IN)</span>
                    <span><i class="fas fa-rupee-sign"></i> INR</span>
                </div>
            </div>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>




         src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"

        // Form validation
        (() => {
            'use strict';
            const forms = document.querySelectorAll('.needs-validation');
            
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                });
            });
            
            // Show more functionality for reviews
            document.querySelectorAll('.show-more').forEach(link => {
                link.addEventListener('click', function() {
                    const content = this.previousElementSibling;
                    if (content.style.webkitLineClamp) {
                        content.style.webkitLineClamp = 'unset';
                        this.textContent = 'Show less';
                    } else {
                        content.style.webkitLineClamp = '3';
                        this.textContent = 'Show more';
                    }
                });
            });
            
            // Rating slider labels
            const ratingSlider = document.getElementById('rating');
            const ratingLabels = document.querySelector('.rating-labels');
            
            if (ratingSlider && ratingLabels) {
                ratingSlider.addEventListener('input', function() {
                    const value = this.value;
                    const labels = ratingLabels.querySelectorAll('span');
                    labels.forEach((label, index) => {
                        if (index < value) {
                            label.style.color = '#ff385c';
                            label.style.fontWeight = 'bold';
                        } else {
                            label.style.color = '';
                            label.style.fontWeight = '';
                        }
                    });
                });
            }
        })();
    </script>
   <script>
  const lat = <%= listing.lat || 0 %>;
  const lng = <%= listing.lng || 0 %>;

  const map = L.map('map').setView([lat, lng], 13);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  L.marker([lat, lng]).addTo(map)
    .bindPopup("<%= listing.title %>")
    .openPopup();
</script>


</body>
</html>